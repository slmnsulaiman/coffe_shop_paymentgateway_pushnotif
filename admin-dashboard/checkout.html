<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Riwayat Checkout</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="css/style.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <div class="container mt-5">
    <h3 class="mb-4">üì¶ Riwayat Pesanan</h3>

    <!-- Statistik -->
    <h4 class="mt-4">üìä Statistik Transaksi</h4>
    <canvas id="chartMetode" height="100"></canvas>
    <hr>

    <!-- Filter -->
    <div class="row mb-4">
      <div class="col-md-3">
        <label>Metode</label>
        <select id="filterType" class="form-select">
          <option value="All">All</option>
          <option value="Cash">Cash</option>
          <option value="Gateway">Payment Gateway</option>
        </select>
      </div>
      <div class="col-md-3">
        <label>Waktu</label>
        <select id="filterWaktu" class="form-select">
          <option value="Today">Hari Ini</option>
          <option value="Week">1 Minggu Terakhir</option>
          <option value="Month">Bulanan</option>
        </select>
      </div>
      <div class="col-md-3">
        <label>Bulan</label>
        <select id="filterBulan" class="form-select">
          <option value="0">Semua</option>
          <option value="1">Januari</option>
          <option value="2">Februari</option>
          <option value="3">Maret</option>
          <option value="4">April</option>
          <option value="5">Mei</option>
          <option value="6">Juni</option>
          <option value="7">Juli</option>
          <option value="8">Agustus</option>
          <option value="9">September</option>
          <option value="10">Oktober</option>
          <option value="11">November</option>
          <option value="12">Desember</option>
        </select>
      </div>
      <div class="col-md-3">
        <label>Tahun</label>
        <select id="filterTahun" class="form-select">
          <option value="2024">2024</option>
          <option value="2025" selected>2025</option>
          <option value="2026">2026</option>
        </select>
      </div>
      <div class="col-md-12 mt-3 text-end">
        <button class="btn btn-primary" onclick="fetchAndRender()">Terapkan Filter</button>
      </div>
    </div>

    <!-- Tabel -->
    <table class="table table-bordered table-striped">
      <thead class="table-dark">
        <tr>
          <th>No</th>
          <th>Nama</th>
          <th>Email</th>
          <th>Metode</th>
          <th>Type</th>
          <th>Total</th>
          <th>Status</th>
          <th>Tanggal</th>
        </tr>
      </thead>
      <tbody id="checkoutTableBody">
        <tr><td colspan="8" class="text-center">Memuat data...</td></tr>
      </tbody>
    </table>

    <a href="dashboard.html" class="btn btn-secondary mt-3">‚Üê Kembali ke Dashboard</a>
  </div>

  <script src="js/config.js"></script>
  <script src="js/history_orders.js"></script>
  <script>
    const waktuSelect = document.getElementById("filterWaktu");
    const bulanSelect = document.getElementById("filterBulan");
    const tahunSelect = document.getElementById("filterTahun");

    waktuSelect.addEventListener("change", () => {
      const waktu = waktuSelect.value;
      const disable = waktu === "Today";
      bulanSelect.disabled = disable;
      tahunSelect.disabled = disable;
    });

    document.addEventListener("DOMContentLoaded", () => {
      const waktu = waktuSelect.value;
      const disable = waktu === "Today";
      bulanSelect.disabled = disable;
      tahunSelect.disabled = disable;
    });
  </script>
</body>
</html>
